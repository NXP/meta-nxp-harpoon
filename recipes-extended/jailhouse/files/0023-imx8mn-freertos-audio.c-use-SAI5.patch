From 273ba9f516ef99b2a9bdf0a9f580cee83b532024 Mon Sep 17 00:00:00 2001
From: Fabrice Goucem <fabrice.goucem@nxp.com>
Date: Thu, 20 Jan 2022 09:46:03 +0100
Subject: [PATCH 23/64] imx8mn-freertos-audio.c: use SAI5

Signed-off-by: Fabrice Goucem <fabrice.goucem@nxp.com>
---
 configs/arm64/imx8mn-harpoon-freertos-audio.c | 19 ++++++++++---------
 configs/arm64/imx8mn-harpoon-rtos.h           |  1 +
 2 files changed, 11 insertions(+), 9 deletions(-)

diff --git a/configs/arm64/imx8mn-harpoon-freertos-audio.c b/configs/arm64/imx8mn-harpoon-freertos-audio.c
index 159d59d1..ccd4c376 100644
--- a/configs/arm64/imx8mn-harpoon-freertos-audio.c
+++ b/configs/arm64/imx8mn-harpoon-freertos-audio.c
@@ -22,14 +22,14 @@
 /* Memory & peripherals */
 #define CONFIG_INMATE_REGIONS		\
 	RTOS_COMMON_MEMORY_REGIONS,                                     \
-	MEM_REGION_RWXL(0x93c00000, 0xc0000000, MB(16)),  /* RAM */     \
-	MEM_REGION_RWX( 0x00900000, 0x00900000, KB(384)), /* OCRAM */   \
-	MEM_REGION_RW(  0x00800000, 0x00800000, KB(128)), /* DTCM */    \
-	MEM_REGION_RWX( 0x007e0000, 0x007e0000, KB(128)), /* ITCM */    \
-	MMIO_REGION_RWS(0x30360000, 0x30360000, KB(64)),  /* ANA_PLL */ \
-	MMIO_REGION_RWS(0x30380000, 0x30380000, KB(64)),  /* CCM */     \
-	MMIO_REGION_RWS(0x30a40000, 0x30a40000, KB(64)),  /* I2C3 */    \
-	MMIO_REGION_RWS(0x30030000, 0x30030000, KB(64))   /* SAI3 */
+	MEM_REGION_RWXL(0x93c00000, 0xc0000000, MB(16)),   /* RAM */    \
+	MEM_REGION_RWX( 0x00900000, 0x00900000, KB(384)),  /* OCRAM */  \
+	MEM_REGION_RW(  0x00800000, 0x00800000, KB(128)),  /* DTCM */   \
+	MEM_REGION_RWX( 0x007e0000, 0x007e0000, KB(128)),  /* ITCM */   \
+	MMIO_REGION_RWS(0x30360000, 0x30360000, KB(64)),   /* ANA_PLL */\
+	MMIO_REGION_RWS(0x30380000, 0x30380000, KB(64)),   /* CCM */    \
+	MMIO_REGION_RWS(0x30a40000, 0x30a40000, KB(64)),   /* I2C3 */   \
+	MMIO_REGION_RWS(0x30050000, 0x30050000, KB(64))    /* SAI5 */
 
 /* GIC */
 #define CONFIG_INMATE_IRQCHIPS_ADDR	(0x38800000)
@@ -42,7 +42,8 @@
 		IRQnMAP(I2C3_IRQn) | /* I2C3 */            \
 		IRQnMAP(I2S3_IRQn),  /* SAI3 */            \
 		/* interrupts 96..127 */                   \
-		RTOS_COMMON_IRQCHIPS_BITMAP3,              \
+		RTOS_COMMON_IRQCHIPS_BITMAP3 |             \
+		IRQnMAP(I2S56_IRQn),  /* SAI5 */           \
 		/* interrupts 128..159 */                  \
 		RTOS_COMMON_IRQCHIPS_BITMAP4)
 
diff --git a/configs/arm64/imx8mn-harpoon-rtos.h b/configs/arm64/imx8mn-harpoon-rtos.h
index 87dccfa9..8830716a 100644
--- a/configs/arm64/imx8mn-harpoon-rtos.h
+++ b/configs/arm64/imx8mn-harpoon-rtos.h
@@ -20,6 +20,7 @@ typedef enum IRQn {
   I2S3_IRQn                    = 82,               /**< SAI3 Receive / Transmit Interrupt */
   GPT2_IRQn                    = 86,               /**< OR of GPT Rollover interrupt line, Input Capture 1 and 2 lines, Output Compare 1, 2, and 3 Interrupt lines */
   GPT1_IRQn                    = 87,               /**< OR of GPT Rollover interrupt line, Input Capture 1 and 2 lines, Output Compare 1, 2, and 3 Interrupt lines */
+  I2S56_IRQn                   = 122,              /**< SAI5/6 Receive / Transmit Interrupt */
 } IRQn_Type;
 
 #define RTOS_COMMON_MEMORY_REGIONS \
-- 
2.34.1

